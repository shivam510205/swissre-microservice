# SwissRe Production Configuration

# Backend configuration
backend:
  enabled: true
  replicaCount: 3
  
  image:
    repository: trialf20tqh.jfrog.io/swissre-api
    tag: "prod-latest"
    pullPolicy: IfNotPresent
  
  service:
    type: ClusterIP
    port: 8080
    targetPort: 8080
  
  resources:
    limits:
      cpu: 2000m
      memory: 4Gi
    requests:
      cpu: 1000m
      memory: 2Gi
  
  env:
    - name: AWS_REGION
      value: "us-east-1"
    - name: SWISSRE_SECRET_NAME
      value: "swissre/api-token"
    - name: LOG_LEVEL
      value: "INFO"

# Frontend configuration
frontend:
  enabled: true
  replicaCount: 2
  
  image:
    repository: trialf20tqh.jfrog.io/swissre-streamlit
    tag: "prod-latest"
    pullPolicy: IfNotPresent
  
  service:
    type: ClusterIP
    port: 8501
    targetPort: 8501
  
  resources:
    limits:
      cpu: 1000m
      memory: 2Gi
    requests:
      cpu: 500m
      memory: 1Gi
  
  env:
    - name: SWISSRE_API_URL
      value: "http://swissre-prod-backend:8080"

# Service Account
serviceAccount:
  create: true
  annotations:
    eks.amazonaws.com/role-arn: "arn:aws:iam::352635226587:role/SFGAppSwissReServiceRole"
  name: "swissre-service-account"

# Security Context
podSecurityContext:
  runAsNonRoot: true
  runAsUser: 1001
  fsGroup: 1001

securityContext:
  allowPrivilegeEscalation: false
  readOnlyRootFilesystem: true
  runAsNonRoot: true
  runAsUser: 1001
  capabilities:
    drop:
    - ALL
